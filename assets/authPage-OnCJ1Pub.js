import{j as e,e as s,B as r,n as t,o as a,p as i,q as l,D as o,E as n,G as d,H as c,V as u,w as m,x as g,y as x,z as f,M as h,S as b,f as p,g as j,h as w,i as y,k as N}from"./ui-CKu8JIXp.js";import{l as v,r as P}from"./vendor-C0qp8t1d.js";import{u as S}from"./useAuth-ClZB3FXr.js";import{u as C}from"./i18n-BqTtoiWo.js";import{j as k,f as z,U as q,k as D,l as L,m as M,I}from"./icons-CWPu_Ox_.js";import"./index-C7zud3iY.js";const E=()=>{const{t:r}=C();return e.jsx(s,{delayDuration:200,skipDelayDuration:200,children:e.jsxs(p,{children:[e.jsx(j,{asChild:!0,children:e.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full","aria-label":r("login-form.passwordRequirements"),children:e.jsx(I,{size:16})})}),e.jsx(w,{children:e.jsxs(y,{className:"bg-white p-3 rounded-md shadow-lg border border-gray-200 max-w-xs z-50",sideOffset:5,children:[e.jsxs("div",{className:"text-xs text-gray-700",children:[e.jsxs("p",{className:"font-medium mb-1",children:[r("login-form.passwordMustContain"),":"]}),e.jsxs("ul",{className:"list-disc list-inside",children:[e.jsx("li",{children:r("login-form.passwordCriteria.minLength")}),e.jsx("li",{children:r("login-form.passwordCriteria.upperCase")}),e.jsx("li",{children:r("login-form.passwordCriteria.lowerCase")}),e.jsx("li",{children:r("login-form.passwordCriteria.number")}),e.jsx("li",{children:r("login-form.passwordCriteria.specialChar")})]})]}),e.jsx(N,{className:"fill-white"})]})})]})})},F=({password:s})=>{const{t:r}=C(),t=(e=>{if(!e)return"none";const s=[e.length>=8,/[A-Z]/.test(e),/[a-z]/.test(e),/\d/.test(e),/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>\/?]/.test(e)].filter(Boolean).length;return s<=2?"weak":s<=4?"medium":"strong"})(s);return s?e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"h-1 w-full bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${(()=>{switch(t){case"weak":return"w-1/3";case"medium":return"w-2/3";case"strong":return"w-full";default:return"w-0"}})()} ${(()=>{switch(t){case"weak":return"bg-red-500";case"medium":return"bg-yellow-500";case"strong":return"bg-green-500";default:return"bg-gray-200"}})()} transition-all duration-300`})}),e.jsx("p",{className:`text-xs mt-1 ${(()=>{switch(t){case"weak":return"text-red-500";case"medium":return"text-yellow-600";case"strong":return"text-green-600";default:return"text-gray-500"}})()}`,children:(()=>{switch(t){case"weak":return r("login-form.passwordStrength.weak");case"medium":return r("login-form.passwordStrength.medium");case"strong":return r("login-form.passwordStrength.strong");default:return""}})()})]}):null},R=({showPassword:s,toggleShowPassword:r,formPassword:t,setFormPassword:a,minLength:i=0,showStrengthIndicator:l=!1})=>{const{t:o}=C();return e.jsxs(g,{name:"password",className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"block text-sm font-medium text-gray-700",children:o("login-form.password")}),l&&e.jsx(E,{})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:e.jsx(D,{size:18,"aria-hidden":"true"})}),e.jsx(f,{asChild:!0,children:e.jsx("input",{type:s?"text":"password",required:!0,minLength:i,className:"w-full rounded-md border border-gray-300 py-2 pl-10 pr-10 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"••••••••",value:t,onChange:e=>a(e.target.value),"aria-invalid":"false"})}),e.jsx("button",{type:"button",onClick:r,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-md","aria-label":o(s?"login-form.hidePassword":"login-form.showPassword"),children:s?e.jsx(L,{size:18,"aria-hidden":"true"}):e.jsx(M,{size:18,"aria-hidden":"true"})})]}),l&&e.jsx(F,{password:t}),e.jsx(h,{match:"valueMissing",className:"text-sm text-red-600",children:o("requests-form.required")}),i>0&&e.jsx(h,{match:"tooShort",className:"text-sm text-red-600",children:o("login-form.passwordTooShort",{count:i})})]})},T=({onSubmit:s,isLoading:r,showPassword:t,toggleShowPassword:a})=>{const{t:i}=C(),[l,o]=P.useState(""),[n,d]=P.useState("");return e.jsxs(m,{onSubmit:s,className:"space-y-4",children:[e.jsxs(g,{name:"email",className:"space-y-2",children:[e.jsx(x,{className:"block text-sm font-medium text-gray-700",children:i("login-form.email")}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:e.jsx(z,{size:18,"aria-hidden":"true"})}),e.jsx(f,{asChild:!0,children:e.jsx("input",{type:"email",required:!0,className:"w-full rounded-md border border-gray-300 py-2 pl-10 pr-3 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:i("login-form.emailPlaceholder"),value:l,onChange:e=>o(e.target.value),"aria-invalid":"false"})})]}),e.jsx(h,{match:"valueMissing",className:"text-sm text-red-600",children:i("login-form.emailRequired")}),e.jsx(h,{match:"typeMismatch",className:"text-sm text-red-600",children:i("login-form.emailInvalid")})]}),e.jsx(R,{showPassword:t,toggleShowPassword:a,formPassword:n,setFormPassword:d}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:text-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-md",children:i("login-form.forgotPassword")})}),e.jsx(b,{asChild:!0,children:e.jsx("button",{className:"w-full rounded-md bg-blue-600 py-2 px-4 font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 transition-colors",disabled:r,"aria-busy":r,children:i(r?"login-form.loggingIn":"login-form.login-button")})})]})},$=({onSubmit:s,isLoading:r,showPassword:t,toggleShowPassword:a})=>{const{t:i}=C(),[l,o]=P.useState(""),[n,d]=P.useState(""),[c,u]=P.useState(""),[p,j]=P.useState(""),[w,y]=P.useState(!0);return P.useEffect((()=>{y(!p||c===p)}),[c,p]),e.jsxs(m,{onSubmit:e=>{w?s(e):e.preventDefault()},className:"space-y-4",children:[e.jsxs(g,{name:"name",className:"space-y-2",children:[e.jsx(x,{className:"block text-sm font-medium text-gray-700",children:i("register-form.name")}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:e.jsx(q,{size:18,"aria-hidden":"true"})}),e.jsx(f,{asChild:!0,children:e.jsx("input",{type:"text",required:!0,className:"w-full rounded-md border border-gray-300 py-2 pl-10 pr-3 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:i("register-form.namePlaceholder"),value:l,onChange:e=>o(e.target.value),"aria-invalid":"false"})})]}),e.jsx(h,{match:"valueMissing",className:"text-sm text-red-600",children:i("register-form.nameRequired")})]}),e.jsxs(g,{name:"email",className:"space-y-2",children:[e.jsx(x,{className:"block text-sm font-medium text-gray-700",children:i("register-form.email")}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:e.jsx(z,{size:18,"aria-hidden":"true"})}),e.jsx(f,{asChild:!0,children:e.jsx("input",{type:"email",required:!0,className:"w-full rounded-md border border-gray-300 py-2 pl-10 pr-3 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:i("register-form.emailPlaceholder"),value:n,onChange:e=>d(e.target.value),"aria-invalid":"false"})})]}),e.jsx(h,{match:"valueMissing",className:"text-sm text-red-600",children:i("register-form.emailRequired")}),e.jsx(h,{match:"typeMismatch",className:"text-sm text-red-600",children:i("register-form.emailInvalid")})]}),e.jsx(R,{showPassword:t,toggleShowPassword:a,formPassword:c,setFormPassword:u,minLength:8,showStrengthIndicator:!0}),e.jsxs(g,{name:"confirmPassword",className:"space-y-2",children:[e.jsx(x,{className:"block text-sm font-medium text-gray-700",children:i("register-form.confirmPassword")}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:e.jsx(D,{size:18,"aria-hidden":"true"})}),e.jsx(f,{asChild:!0,children:e.jsx("input",{type:t?"text":"password",required:!0,minLength:8,className:`w-full rounded-md border ${!w&&p?"border-red-500":"border-gray-300"} py-2 pl-10 pr-10 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500`,placeholder:"••••••••",value:p,onChange:e=>j(e.target.value),"aria-invalid":!w&&p?"true":"false"})}),e.jsx("button",{type:"button",onClick:a,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-md","aria-label":i(t?"login-form.hidePassword":"login-form.showPassword"),children:t?e.jsx(L,{size:18,"aria-hidden":"true"}):e.jsx(M,{size:18,"aria-hidden":"true"})})]}),e.jsx(h,{match:"valueMissing",className:"text-sm text-red-600",children:i("register-form.confirmPasswordRequired")}),!w&&p&&e.jsx("p",{className:"text-sm text-red-600",children:i("register-form.passwordsDoNotMatch")})]}),e.jsx(b,{asChild:!0,children:e.jsx("button",{className:"w-full rounded-md bg-blue-600 py-2 px-4 font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 transition-colors",disabled:r||!(!p||w),"aria-busy":r,children:i(r?"register-form.creatingAccount":"register-form.register-button")})})]})};function A(){const{t:m}=C(),g=v(),[x,f]=P.useState(!1),{login:h,register:b,isAuthenticated:p,isLoading:j,error:w,clearError:y}=S(),[N,z]=P.useState("login"),[q,D]=P.useState(!1),[L,M]=P.useState("");P.useEffect((()=>{p&&g("/")}),[p,g]),P.useEffect((()=>{w&&y()}),[N,y,w]),P.useEffect((()=>{w&&(M(w),D(!0))}),[w]);const I=()=>{f(!x)};return e.jsx(s,{children:e.jsx(r,{swipeDirection:"right",children:e.jsxs("div",{className:"flex min-h-full min-w-full items-center justify-center bg-gray-50 p-4",children:[e.jsx("div",{className:"w-full max-w-md overflow-hidden rounded-lg bg-white shadow-xl",children:e.jsxs(t,{defaultValue:"login",value:N,onValueChange:e=>z(e),className:"w-full",children:[e.jsxs(a,{className:"flex border-b","aria-label":m("login-form.authenticationTabsLabel"),children:[e.jsx(i,{value:"login",className:"flex-1 p-4 text-center font-medium hover:bg-gray-100 data-[state=active]:border-b-2 data-[state=active]:border-blue-500 transition-colors",children:m("login-form.title")}),e.jsx(i,{value:"register",className:"flex-1 p-4 text-center font-medium hover:bg-gray-100 data-[state=active]:border-b-2 data-[state=active]:border-blue-500 transition-colors",children:m("register-form.title")})]}),w&&e.jsxs("div",{className:"flex items-center gap-2 bg-red-50 p-3 text-red-600 text-sm",role:"alert","aria-live":"assertive",children:[e.jsx(k,{size:16,"aria-hidden":"true"}),e.jsx("span",{children:w})]}),e.jsx(l,{value:"login",className:"p-6 focus:outline-none",tabIndex:0,children:e.jsx(T,{onSubmit:e=>{e.preventDefault();const s=new FormData(e.currentTarget),r=s.get("email"),t=s.get("password");h(r,t)},isLoading:j,showPassword:x,toggleShowPassword:I})}),e.jsx(l,{value:"register",className:"p-6 focus:outline-none",tabIndex:0,children:e.jsx($,{onSubmit:e=>{e.preventDefault();const s=new FormData(e.currentTarget),r=s.get("name"),t=s.get("email"),a=s.get("password");a===s.get("confirmPassword")&&b(r,t,a)},isLoading:j,showPassword:x,toggleShowPassword:I})})]})}),e.jsxs(o,{className:"bg-white rounded-md shadow-lg border border-gray-200 p-4 grid grid-cols-[auto_max-content] gap-x-4 items-center fixed bottom-4 right-4 data-[state=open]:animate-slideIn data-[state=closed]:animate-slideOut",open:q,onOpenChange:D,children:[e.jsxs(n,{className:"flex items-center gap-2 text-red-600 font-medium",children:[e.jsx(k,{size:16}),m("errors.title")]}),e.jsx(d,{className:"text-gray-700 mt-1",children:L}),e.jsx(c,{className:"grid",asChild:!0,altText:m("buttons.close"),children:e.jsx("button",{className:"absolute top-2 right-2 inline-flex items-center justify-center rounded-md p-1 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":m("buttons.close"),children:"×"})})]}),e.jsx(u,{className:"fixed bottom-0 right-0 p-6 flex flex-col gap-2 w-96 max-w-[100vw] m-0 list-none z-50"})]})})})}export{A as default};
